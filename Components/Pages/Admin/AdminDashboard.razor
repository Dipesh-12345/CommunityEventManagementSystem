@page "/admin"
@attribute [Authorize(Policy = "AdminOnly")]
@inject RegistrationService RegistrationService

<h1 class="mb-3">Admin Dashboard</h1>

<p class="lead">Select to manage:</p>

<!-- ADMIN OPTIONS -->
<div class="admin-dashboard">
    <div class="row g-4">

        <div class="col-md-4">
            <div class="card admin-card">
                <div class="card-body">
                    <img src="event.png">
                    <h4>Events</h4>
                    <h6>Create new event. must create activity and venue first</h6>
                    <a class="btn admin-btn" href="/admin/events">Manage Events</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card admin-card">
                <div class="card-body">
                    <img src="participants.png" >
                    <h4>Participants</h4>
                    <h6>User can register and and manage participants details</h6>
                    <a class="btn admin-btn" href="/admin/participants">Manage Participants</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card admin-card">
                <div class="card-body">
                    <img src="venues.png" />
                    <h4>Venues</h4>
                    <h6>Contains informations about locations</h6>
                    <a class="btn admin-btn" href="/admin/venues">Manage Venues</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card admin-card">
                <div class="card-body">
                    <img src="Activities.png" />
                    <h4>Activities</h4>
                    <h6>List various activities here.</h6>
                    <a class="btn admin-btn" href="/admin/activities">Manage Activities</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card admin-card">
                <div class="card-body">
                    <img src="right.png">
                    <h4>Approvals</h4>
                    <h6>View approvals</h6>
                    <a class="btn admin-btn" href="/admin/approvals">Approve / Decline</a>
                </div>
            </div>
        </div>

    </div>
</div>


    @if (_pendingCount >= 0)
    {
        <div class="mt-3">
            <span class="badge bg-primary px-3 py-2 fs-6">
                Pending Requests: @_pendingCount
            </span>
        </div>
    }


@code {
    private int _pendingCount = -1;

    protected override async Task OnInitializedAsync()
    {
        var pending = await RegistrationService.GetPendingRequestsAsync();
        _pendingCount = pending.Count;
    }
}
